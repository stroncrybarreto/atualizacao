<?xml version='1.0' encoding='iso8859-1'?>
<relatorio ts="2008-08-06 08:31:00" versao_xml="0.1"><tela titulo="Relatório de Vendas por Grupo">
  <quadro titulo="Parâmetros">
    <procura id="grupo" modelo="grupo_produto" titulo="Grupo" valor_padrao="select null" />
    <procura id="subgrupo" modelo="subgrupo_produto" titulo="SubGrupo" />
    <caixa>
      <campo id="data_ini" requerido="sim" tipo="data" titulo="Data Inicio" valor_padrao="select to_char(current_date, &apos;YYYY-mm-01&apos;)::date" />
      <campo id="data_fim" requerido="sim" tipo="data" titulo="Data Fim" valor_padrao="select to_char(current_date + interval &apos;1 month&apos;, &apos;YYYY-mm-01&apos;)::date - 1" />
    </caixa>
    <campo expande="0" id="turno" tipo="inteiro" titulo="Turno" />
  </quadro>
</tela><ajuda>&lt;big&gt;&lt;b&gt;Relatorio de Vendas por Grupo&lt;/b&gt;&lt;/big&gt;

Este relatório permite ver as Vendas por Grupo</ajuda><layout dados="select       e.nome as pessoa_nome,       g.nome as grupo_nome,       p.codigo,       p.nome as descricao,       p.unid_med,       p.classificacao_fiscal,       sum(l.quantidade) as quantidade,       sum(l.valor) as valor  from       lancto l            left join pessoa e on (l.empresa=e.grid)            left join produto p on (l.produto=p.grid)            left join grupo_produto g on (p.grupo=g.grid)  where       (l.data between $data_ini and $data_fim)        and l.operacao = &apos;V&apos;        and (case            when $grupo is null then true else p.grupo = $grupo end)       and (case            when $subgrupo is null then true else p.subgrupo = $subgrupo end)       and (case            when $turno is null then true else l.turno = $turno end)  group by       l.produto,       e.nome,       g.nome,       p.codigo,       p.nome,       p.unid_med,       p.classificacao_fiscal  order by       e.nome,       g.nome,       p.nome" id="4926af86b780ec1532e27002f617f068" ordem=" " titulo="Agrupado por Grupo"><apelidos>1  rel_posto_nome      tam=60
2  rel_data_hora       tam=18  
3  titulo              tam=96  alinha=centro
4  data_fim            tam=10  fmt=data
5  pessoa_nome         tam=40
6  grupo_nome          tam=35
7  codigo              tam=6   
8  descricao           tam=40
9  unid_med            tam=4
10 quantidade          tam=12  fmt=%.02f
11 valor               tam=10  fmt=%.02f
12 total_qtde_grupo    tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=2
13 total_valor_grupo   tam=10  fmt=%.02f	func=soma	campo=valor		grupo=2
14 total_qtde_pessoa   tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=1
15 total_valor_pessoa  tam=10  fmt=%.02f	func=soma	campo=valor		grupo=1</apelidos><cab_pagina>
#1                                                                                #2                 
--------------------------------------------------------------------------------------------------
   
                           RELATORIO DE VENDAS POR GRUPO DE PRODUTOS
#3
</cab_pagina>
<cab_grupo nome="1" quebra="pessoa_nome">

EMPRESA: #5                                                                             
</cab_grupo>

<cab_grupo nome="2" quebra="pessoa_nome,grupo_nome">
+------------------------------------------------------------------------------------------------+
| GRUPO: #6                                                                                      |
+--------+-----------------------------------------------+---------+--------------+--------------+
| Codigo | Descricao                                     | Unidade |   Quantidade |       Valor  |
+--------+-----------------------------------------------+---------+--------------+--------------+
</cab_grupo>
<detalhe>
| #7     | #8                                            |   #9    | #10          |  #11         |
</detalhe>
<rod_grupo nome="2">
+--------+-----------------------------------------------+---------+--------------+--------------+
| TOTAL DO GRUPO                                                   | #12          |  #13         |
+------------------------------------------------------------------+--------------+--------------+

</rod_grupo>
<rod_grupo nome="1">
+------------------------------------------------------------------+--------------+--------------+
| TOTAL DA EMPRESA #5                                              | #14          |  #15         |
+------------------------------------------------------------------+--------------+--------------+
</rod_grupo>
<rod_pagina>
+------------------------------------------------------------------------------------------------+
</rod_pagina></layout><layout dados="select       e.nome as pessoa_nome,       g.nome as grupo_nome,       p.codigo,       p.nome as descricao,       p.unid_med,       p.classificacao_fiscal,       sum(l.quantidade) as quantidade,       sum(l.valor) as valor,       &apos;SUB GRUPO: &apos; || sg.nome as sub_grupo_nome  from       lancto l            left join pessoa e on (l.empresa=e.grid)            left join produto p on (l.produto=p.grid)            left join grupo_produto g on (p.grupo=g.grid)            left join subgrupo_produto sg on (p.subgrupo=sg.grid)  where       l.data between $data_ini       and $data_fim       and l.operacao = &apos;V&apos;       and (case            when $grupo is null then true else p.grupo = $grupo end)       and (case            when $subgrupo is null then true else p.subgrupo = $subgrupo end)       and (case            when $turno is null then true else l.turno = $turno end)  group by       l.produto,       e.nome,       g.nome,       sg.nome,       p.codigo,       p.nome,       p.unid_med,       p.classificacao_fiscal  order by       e.nome,       g.nome,       sg.nome,       p.nome" id="1432a2435279fd9ec8674495423400a8" ordem=" " titulo="agrupado por Grupo e Subgrupo"><apelidos>1  rel_posto_nome          tam=60
2  rel_data_hora           tam=18  
3  titulo                  tam=96  alinha=centro
4  data_fim                tam=10  fmt=data
5  pessoa_nome             tam=40
6  grupo_nome              tam=35
7  codigo                  tam=6   
8  descricao               tam=40
9  unid_med                tam=4
10 quantidade              tam=12  fmt=%.02f
11 valor                   tam=10  fmt=%.02f
12 total_qtde_grupo        tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=2
13 total_valor_grupo       tam=10  fmt=%.02f	func=soma	campo=valor		grupo=2
14 total_qtde_pessoa       tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=1
15 total_valor_pessoa      tam=10  fmt=%.02f	func=soma	campo=valor		grupo=1
97 total_qtde_sub_grupo    tam=10  fmt=%.01f	func=soma	campo=quantidade	grupo=3
98 total_valor_sub_grupo   tam=10  fmt=%.02f	func=soma	campo=valor		grupo=3
99 sub_grupo_nome	   tam=35</apelidos><cab_pagina>
#1                                                                                #2                 
--------------------------------------------------------------------------------------------------
   
                           RELATORIO DE VENDAS POR GRUPO DE PRODUTOS
#3
</cab_pagina>
<cab_grupo nome="1" quebra="pessoa_nome">

EMPRESA: #5                                                                             
</cab_grupo>

<cab_grupo nome="2" quebra="grupo_nome">
</cab_grupo>

<cab_grupo nome="3" quebra="pessoa_nome,grupo_nome,sub_grupo_nome">
+------------------------------------------------------------------------------------------------+
| GRUPO: #6                                    #99                                               |
+--------+-----------------------------------------------+---------+--------------+--------------+
| Codigo | Descricao                                     | Unidade |   Quantidade |       Valor  |
+--------+-----------------------------------------------+---------+--------------+--------------+
</cab_grupo>
<detalhe>
| #7     | #8                                            |   #9    | #10          |  #11         |
</detalhe>
<rod_grupo nome="2">
+------------------------------------------------------------------+--------------+--------------+
| TOTAL DO GRUPO                                                   | #12          |  #13         |
+------------------------------------------------------------------+--------------+--------------+

</rod_grupo>
<rod_grupo nome="3">
+--------+-----------------------------------------------+---------+--------------+--------------+
| TOTAL DO SUB GRUPO                                               | #97          |  #98         |
+------------------------------------------------------------------+--------------+--------------+

</rod_grupo>
<rod_grupo nome="1">
+------------------------------------------------------------------+--------------+--------------+
| TOTAL DA EMPRESA #5                                              | #14          |  #15         |
+------------------------------------------------------------------+--------------+--------------+
</rod_grupo>
<rod_pagina>
+------------------------------------------------------------------------------------------------+
</rod_pagina></layout><layout dados="select         e.nome as pessoa_nome, g.nome as grupo_nome, p.codigo, p.nome as descricao,         p.unid_med, p.classificacao_fiscal,         sum(l.quantidade) as quantidade, l.data, sum(l.valor) as valor,         &apos;SUB GRUPO: &apos; || sg.nome as sub_grupo_nome from         lancto l           left join pessoa e on (l.empresa=e.grid)           left join produto p on (l.produto=p.grid)           left join grupo_produto g on (p.grupo=g.grid)           left join subgrupo_produto sg on (p.subgrupo=sg.grid)  where         l.data between $data_ini and $data_fim        and l.operacao = &apos;V&apos;        and (case when $grupo is null then true else p.grupo = $grupo end)        and (case when $subgrupo is null then true else p.subgrupo = $subgrupo end)        and (case when $turno is null then true else l.turno = $turno end)  group by         l.data,         l.produto, e.nome, g.nome, sg.nome, p.codigo,         p.nome, p.unid_med, p.classificacao_fiscal  order by         l.data,        e.nome,         g.nome,         sg.nome,         p.nome" id="ed5d34e13b7a6131d52d01832324069b" ordem=" " titulo="agrupado por Grupo, Subgrupo e Data"><apelidos>1  rel_posto_nome          tam=60
2  rel_data_hora           tam=18  
3  titulo                  tam=96  alinha=centro
4  data_fim                tam=10  fmt=data
5  pessoa_nome             tam=40
6  grupo_nome              tam=35
7  codigo                  tam=6   
8  descricao               tam=40
9  unid_med                tam=4
10 quantidade              tam=10  fmt=%.01f
11 valor                   tam=10  fmt=%.02f
12 total_qtde_grupo        tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=3
13 total_valor_grupo       tam=10  fmt=%.02f	func=soma	campo=valor	grupo=3
14 total_qtde_pessoa       tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=1
15 total_valor_pessoa      tam=10  fmt=%.02f	func=soma	campo=valor	grupo=1
93 total_valor_data        tam=10  fmt=%.02f	func=soma	campo=valor	grupo=2
94 total_qtde_data         tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=2
96 data                    tam=10
97 total_qtde_sub_grupo    tam=12  fmt=%.02f	func=soma	campo=quantidade	grupo=4
98 total_valor_sub_grupo   tam=10  fmt=%.02f	func=soma	campo=valor	grupo=4
99 sub_grupo_nome	   tam=35</apelidos><cab_pagina>
#1                                                                                #2                 
--------------------------------------------------------------------------------------------------
   
                           RELATÓRIO DE VENDAS POR GRUPO DE PRODUTOS
#3
</cab_pagina>
<cab_grupo nome="1" quebra="pessoa_nome">

EMPRESA: #5                                                                             
</cab_grupo>

<cab_grupo nome="2" quebra="data">


DATA: #96                                                                             

</cab_grupo>

<cab_grupo nome="3" quebra="data,grupo_nome">
</cab_grupo>

<cab_grupo nome="4" quebra="pessoa_nome,data,grupo_nome,sub_grupo_nome">
+------------------------------------------------------------------------------------------------+
| GRUPO: #6                                    #99                                               |
+--------+-----------------------------------------------+---------+--------------+--------------+
| Codigo | Descricao                                     | Unidade |   Quantidade |       Valor  |
+--------+-----------------------------------------------+---------+--------------+--------------+
</cab_grupo>
<detalhe>
| #7     | #8                                            |   #9    | #10          |  #11         |
</detalhe>
<rod_grupo nome="4">
+--------+-----------------------------------------------+---------+--------------+--------------+
| TOTAL DO SUB GRUPO                                               | #97          |  #98         |
+------------------------------------------------------------------+--------------+--------------+

</rod_grupo>
<rod_grupo nome="3">
+------------------------------------------------------------------+--------------+--------------+
| TOTAL DO GRUPO                                                   | #12          |  #13         |
+------------------------------------------------------------------+--------------+--------------+

</rod_grupo>
<rod_grupo nome="2">
+------------------------------------------------------------------+--------------+--------------+
| TOTAL DO DIA                                                     | #94          |  #93         |
+------------------------------------------------------------------+--------------+--------------+


</rod_grupo>
<rod_grupo nome="1">
+------------------------------------------------------------------+--------------+--------------+
| TOTAL DA EMPRESA #5                                              | #14          |  #15         |
+------------------------------------------------------------------+--------------+--------------+
</rod_grupo>
<rod_pagina>
+------------------------------------------------------------------------------------------------+
</rod_pagina></layout></relatorio>