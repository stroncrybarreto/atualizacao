<?xml version='1.0' encoding='iso8859-1'?>
<relatorio ts="2008-09-12 14:03:05" versao_xml="0.1"><tela titulo="Contas Pagas">
  <quadro titulo="Parâmetros">
    <procura id="empresa" modelo="empresa" titulo="Empresa" valor_padrao="select grid from empresa_local" />
    <procura id="conta" modelo="conta" requerido="sim" titulo="Conta" />
    <campo id="data" modelo="periodo" titulo="Vencimento" valor_padrao="select to_char(current_date, &apos;YYYY-mm-01&apos;)::date, to_char(current_date + interval &apos;1 month&apos;, &apos;YYYY-mm-01&apos;)::date - 1" />
    <procura id="fornecedor" modelo="pessoa" titulo="Fornecedor" />
    <procura id="contra_partida" modelo="conta" titulo="Contra Partida" />
    <check id="exibir" titulo="Exibir nome da conta" valor_padrao="select 1" />
  </quadro>
</tela><ajuda /><layout dados="select 
    (select nome from conta where codigo=mov.contra_partida limit 1) as contra_partida_nome,     
    mov.* 
from 
    (select 
        coalesce(pessoa_nome(m.pessoa),&apos;NAO INFORMADO&apos;) as fornecedor_nome, 
        m.valor, 
        to_char(m.data,&apos;dd/mm/yy&apos;) as data_vencimento, 
        movto_data_baixa_f(m.grid) as data_pagamento,
        (select conta_creditar from movto mv join movto_map mp on (mp.child=mv.grid) where mp.parent=m.grid limit 1) as contra_partida, 
        m.documento,
        m.obs,
        m.grid,
        &apos;Empresa: &apos;||pessoa_nome(empresa) as empresa_nome,
        m.empresa,
        m.pessoa,
        m.conta_creditar,
        m.conta_debitar,     
        (case when $exibir=1 then cd.nome else m.conta_debitar end) as nome_conta_debitar,
        (case when $exibir=1 then cc.nome else m.conta_creditar end) as nome_conta_creditar
    from 
        movto m    
              join conta cd on (m.conta_debitar=cd.codigo)
              join conta cc on (m.conta_creditar=cc.codigo)
    where 
        child&lt;&gt;0) mov 
where 
    movto_data_baixa_f(mov.grid) between $data_ini and $data_fim 
and     (case when $empresa is null then true else mov.empresa = $empresa end)
and     mov.conta_creditar = $conta
and     (case when $contra_partida is null then true else mov.contra_partida=$contra_partida end)
and     (case when $fornecedor is null then true else mov.pessoa = $fornecedor end)
order by 
    data_pagamento, 
    fornecedor_nome, 
    data_vencimento" id="4926af86b780ec1532e27002f617f068" ordem=" " titulo="Sem Agrupamento"><apelidos>1  rel_posto_nome	tam=60
2  rel_data_hora	tam=18
3  data_vencimento	tam=8
4  data_pagamento	tam=10  fmt=data
5  fornecedor_nome	tam=16
6  documento		tam=10
7  obs			tam=16
8  valor		tam=9  fmt=%.02f
9  vl_total		tam=9  fmt=%.02f	func=soma	campo=valor
10 data_ini		tam=10	fmt=data
11 data_fim		tam=10	fmt=data
12 empresa_nome		tam=128	alinha=centro
14 nome_conta_debitar	tam=18
13 nome_conta_creditar	tam=15</apelidos><cab_pagina>
#1                                                                                                       #2
----------------------------------------------------------------------------------------------------------------------------

                                                       CONTAS PAGAS
                                           Período de #10        a #11
#12


+------------+------------+----------+------------------+----------------+-------------------+------------------+----------+
| Pagamento  | Documento  | Vencto   | Fornecedor       | C Crédito      | C Débito          | Observação       | Vl. Pago |
+------------+------------+----------+------------------+----------------+-------------------+------------------+----------+
</cab_pagina>

<detalhe>
| #4         | #6         | #3       | #5               | #13            | #14               | #7               | #8       |
</detalhe>

<rod_relat>
+------------+------------+----------+------------------+----------------+-------------------+------------------+----------+
| TOTAL                                                                                                         | #9       |
+---------------------------------------------------------------------------------------------------------------+----------+
</rod_relat>

<rod_pagina>
+------------+------------+----------+------------------+----------------+-------------------+------------------+----------+
</rod_pagina>
</layout><layout dados="select 
    (select nome from conta where codigo=mov.contra_partida limit 1) as contra_partida_nome, 
    (case when to_char(data_pagamento,&apos;D&apos;)=1 then &apos;Domingo&apos; when to_char(data_pagamento,&apos;D&apos;)=2 then &apos;Segunda-feira&apos; when to_char(data_pagamento,&apos;D&apos;)=3 then &apos;Terça-feira&apos; when to_char(data_pagamento,&apos;D&apos;)=4 then &apos;Quarta-feira&apos; when to_char(data_pagamento,&apos;D&apos;)=5 then &apos;Quinta-feira&apos; when to_char(data_pagamento,&apos;D&apos;)=6 then &apos;Sexta-feira&apos; else &apos;Sábado&apos; end) as dia_semana,    
    mov.* 
from 
    (select 
        coalesce(pessoa_nome(m.pessoa),&apos;NAO INFORMADO&apos;) as fornecedor_nome,
        m.valor, 
        m.data as data_vencimento, 
        movto_data_baixa_f(m.grid) as data_pagamento,
        (select conta_creditar from movto mv join movto_map mp on (mp.child=mv.grid) where mp.parent=m.grid limit 1) as contra_partida, 
        m.documento,
        m.obs,
        m.grid,
        &apos;Empresa: &apos;||pessoa_nome(empresa) as empresa_nome,
        m.empresa,
        m.pessoa,
        m.conta_creditar,     
        (case when $exibir=1 then cd.nome else m.conta_debitar end) as nome_conta_debitar,
        (case when $exibir=1 then cc.nome else m.conta_creditar end) as nome_conta_creditar
    from 
        movto m    
              join conta cd on (m.conta_debitar=cd.codigo)
              join conta cc on (m.conta_creditar=cc.codigo)
    where 
        child&lt;&gt;0) mov 
where 
    movto_data_baixa_f(mov.grid) between $data_ini and $data_fim 
and     (case when $empresa is null then true else mov.empresa = $empresa end)
and     mov.conta_creditar = $conta 
and     (case when $contra_partida is null then true else mov.contra_partida = $contra_partida end)
and     (case when $fornecedor is null then true else mov.pessoa = $fornecedor end)
order by 
    data_pagamento, 
    fornecedor_nome, 
    data_vencimento" id="2ed8a75a9ff38ffc92e181f38c912987" ordem="" titulo="Agrupar por data Pagamento"><apelidos>1  rel_posto_nome       tam=60
2  rel_data_hora        tam=18
3  data_vencimento      tam=10  fmt=data
4  data_pagamento       tam=10  fmt=data
5  fornecedor_nome      tam=20
6  documento            tam=10
7  obs                  tam=19
8  valor                tam=9 	fmt=%.02f alinha=direita
9  vl_total             tam=9	fmt=%.02f alinha=direita	func=soma	campo=valor
10 data_ini		tam=10	fmt=data
11 data_fim		tam=10	fmt=data
12 empresa_nome		tam=120		  alinha=centro
13 vl_parcial           tam=9 	fmt=%.02f alinha=direita	func=soma	campo=valor	grupo=1
15 dia_semana           tam=14
16 nome_conta_creditar	tam=15
17 nome_conta_debitar	tam=19</apelidos><cab_pagina>
#1                                                                                                        #2
--------------------------------------------------------------------------------------------------------------------------

                                           CONTAS PAGAS - Agupadas por data
                                           Período de #10        a #11
#12

</cab_pagina>
<cab_grupo nome="1" quebra="data_pagamento">
+------------------------------------------------------------------------------------------------------------------------+
| Data Pagamento: #4         - #15                                                                                       |
+-----------+------------+----------------------+--------------------+-----------------+---------------------+-----------+
| Documento | Vencimento | Fornecedor           | Observação         | C Crédito       | C Débito            |  Vl pago  |
+-----------+------------+----------------------+--------------------+-----------------+---------------------+-----------+
</cab_grupo>                                                    

<detalhe>
| #6        | #3         | #5                   | #7                 | #16             | #17                 | #8        |
</detalhe>

<rod_grupo nome="1">
+-----------+------------+----------------------+--------------------+-----------------+---------------------+-----------+
| SUBTOTAL                                                                                                   | #13       |
+------------------------------------------------------------------------------------------------------------+-----------+

</rod_grupo>

<rod_relat>
+------------------------------------------------------------------------------------------------------------+-----------+
| TOTAL                                                                                                      | #9        |
+------------------------------------------------------------------------------------------------------------+-----------+
</rod_relat>

<rod_pagina>
+-----------+------------+----------------------+--------------------+-----------------+---------------------+-----------+
</rod_pagina>
</layout><layout dados="select 
    (select nome from conta where codigo=mov.contra_partida limit 1) as contra_partida_nome, 
    mov.* 
from 
    (select 
        coalesce(pessoa_nome(m.pessoa),&apos;NAO INFORMADO&apos;) as fornecedor_nome, 
        m.valor, 
        m.data as data_vencimento, 
        movto_data_baixa_f(m.grid) as data_pagamento,
        (select conta_creditar from movto mv join movto_map mp on (mp.child=mv.grid) where mp.parent=m.grid limit 1) as contra_partida, 
        m.documento,
        m.obs,
        m.grid,
        &apos;Empresa: &apos;||pessoa_nome(empresa) as empresa_nome,
        m.empresa,
        m.pessoa,
        m.conta_creditar,
        m.conta_debitar
    from 
        movto m 
    where 
        child&lt;&gt;0) mov 
where 
    movto_data_baixa_f(mov.grid) between $data_ini and $data_fim 
and     (case when $empresa is null then true else mov.empresa = $empresa end)
and     mov.conta_creditar = $conta 
and     (case when $contra_partida is null then true else mov.contra_partida = $contra_partida end)
and     (case when $fornecedor is null then true else mov.pessoa = $fornecedor end)
order by 
    fornecedor_nome, 
    data_pagamento, 
    data_vencimento" id="12a59ffc8264236a628ad42d4f32ab38" ordem="" titulo="Agrupar por Fornecedor"><apelidos>1  rel_posto_nome       tam=60
2  rel_data_hora        tam=18
3  data_vencimento      tam=10  fmt=data
4  data_pagamento       tam=10  fmt=data
5  fornecedor_nome      tam=30
6  documento            tam=10
7  obs                  tam=23
8  valor                tam=10  fmt=%.02f alinha=direita
9  vl_total             tam=10  fmt=%.02f alinha=direita	func=soma	campo=valor
10 data_ini		tam=10	fmt=data
11 data_fim		tam=10	fmt=data
12 empresa_nome		tam=120	alinha=centro
13 vl_parcial           tam=10  fmt=%.02f alinha=direita	func=soma	campo=valor	grupo=1
15 nome_conta_creditar	tam=15
16 nome_conta_debitar	tam=18</apelidos><cab_pagina>
#1                                                                                                     #2
------------------------------------------------------------------------------------------------------------------------

                                        CONTAS PAGAS - Agupadas por Fornecedor
                                           Período de #10        a #11
#12
				
</cab_pagina>
<cab_grupo nome="1" quebra="fornecedor_nome">
+----------------------------------------------------------------------------------------------------------------------+
| Fornecedor: #5                                                                                                       |
+------------+------------+------------+---------------------------+-----------------+--------------------+------------+
| Pagamento  | Documento  | Vencimento | Observação                | C Crédito       | C Débito           |  Vl pago   |
+------------+------------+------------+---------------------------+-----------------+--------------------+------------+
</cab_grupo>                  

<detalhe>
| #4         | #6         | #3         | #7                        | #15             | #16                | #8         |
</detalhe>

<rod_grupo nome="1">
+------------+------------+------------+---------------------------+-----------------+--------------------+------------+
| SUBTOTAL                                                                                                | #13        |
+---------------------------------------------------------------------------------------------------------+------------+

</rod_grupo>

<rod_relat>
+---------------------------------------------------------------------------------------------------------+------------+
| TOTAL                                                                                                   | #9         |
+---------------------------------------------------------------------------------------------------------+------------+
</rod_relat>

<rod_pagina>
+----------------------------------------------------------------------------------------------------------------------+
</rod_pagina>
</layout><layout dados="select      (select nome from conta where codigo=mov.contra_partida limit 1) as contra_partida_nome,     contra_partida||&apos; - &apos;||(select nome from conta where codigo=mov.contra_partida limit 1) as contra_partida_cod_nome,      mov.*  from      (select          coalesce(pessoa_nome(m.pessoa),&apos;NAO INFORMADO&apos;) as fornecedor_nome,          m.valor,          to_char(m.data,&apos;dd/mm/yy&apos;) as data_vencimento,          movto_data_baixa_f(m.grid) as data_pagamento,         (select conta_creditar from movto mv join movto_map mp on (mp.child=mv.grid) where mp.parent=m.grid limit 1) as contra_partida,          m.documento,         m.obs,         m.grid,         &apos;Empresa: &apos;||pessoa_nome(empresa) as empresa_nome,         m.empresa,         m.pessoa,         m.conta_creditar,         m.conta_debitar,              (case when $exibir=1 then cd.nome else m.conta_debitar end) as nome_conta_debitar,         (case when $exibir=1 then cc.nome else m.conta_creditar end) as nome_conta_creditar     from          movto m                   join conta cd on (m.conta_debitar=cd.codigo)               join conta cc on (m.conta_creditar=cc.codigo)     where          child&lt;&gt;0) mov  where      movto_data_baixa_f(mov.grid) between $data_ini and $data_fim  and     (case when $empresa is null then true else mov.empresa = $empresa end) and     mov.conta_creditar = $conta  and     (case when $contra_partida is null then true else mov.contra_partida = $contra_partida end) and     (case when $fornecedor is null then true else mov.pessoa = $fornecedor end) order by      1,     data_pagamento,      fornecedor_nome,      data_vencimento " id="444f9402382acebf8ba48f48b2e144d6" ordem="" titulo="Agrupar por Contra Partida"><apelidos>1  rel_posto_nome       	tam=60
2  rel_data_hora        	tam=18
3  data_vencimento      	tam=8
4  data_pagamento       	tam=10  fmt=data
5  fornecedor_nome      	tam=17
6  documento            	tam=9
7  obs                  	tam=17
8  valor                	tam=9  	fmt=%.02f alinha=direita
9  vl_total             	tam=9  	fmt=%.02f alinha=direita	func=soma	campo=valor
10 data_ini			tam=10	fmt=data
11 data_fim			tam=10	fmt=data
12 empresa_nome			tam=120	alinha=centro
13 vl_parcial           	tam=9  	fmt=%.02f alinha=direita	func=soma	campo=valor	grupo=1
14 nome_conta_creditar		tam=14
15 nome_conta_debitar		tam=17
16 contra_partida_cod_nome	tam=80</apelidos><cab_pagina> 
#1                                                                                                         #2
----------------------------------------------------------------------------------------------------------------------------

                                        CONTAS PAGAS - Agupadas Conta Contra Patida
                                           Período de #10        a #11
#12
				
</cab_pagina>
<cab_grupo nome="1" quebra="contra_partida_nome">
+--------------------------------------------------------------------------------------------------------------------------+
| Contra partida: #16                                                                                                      |
+------------+-----------+----------+-------------------+----------------+-------------------+------------------+----------+
| Pagamento  | Documento | Vencto   | Fornecedor        | C Crédito      | C Débito          | Observação       | Vl. Pago |
+------------+-----------+----------+-------------------+----------------+-------------------+------------------+----------+
</cab_grupo>					

<detalhe>
| #4         | #6        | #3       | #5                | #14            | #15               | #7               | #8       |
</detalhe>

<rod_grupo nome="1">
+------------+-----------+----------+-------------------+----------------+-------------------+------------------+----------+
| SUBTOTAL                                                                                                      | #13      |
+---------------------------------------------------------------------------------------------------------------+----------+

</rod_grupo>

<rod_relat>
+---------------------------------------------------------------------------------------------------------------+----------+
| TOTAL                                                                                                         | #9       |
+---------------------------------------------------------------------------------------------------------------+----------+
</rod_relat>

<rod_pagina>
+--------------------------------------------------------------------------------------------------------------------------+
</rod_pagina>
</layout></relatorio>
