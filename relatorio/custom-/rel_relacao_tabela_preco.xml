<?xml version='1.0' encoding='iso8859-1'?>
<relatorio ts="2008-08-27 14:14:33" versao_xml="0.1"><tela titulo="Relação de Tabelas de Preço">
  <quadro titulo="Parâmetros">
    <selecao id="tabela_preco" origem="select nome from tabela_preco where nome !=&apos;&apos; order by nome" requerido="sim" titulo="Grupo" />
  </quadro>
</tela><ajuda /><layout dados="select tab.*, (case when tab.produto is not null then (select nome from produto where grid=tab.produto limit 1) else (select nome from grupo_produto where grid=tab.grupo) end) as item, (case when tab.produto is not null then &apos;Produto&apos; else &apos;Grupo&apos; end) as tipo, (case when tab.valor_novo is null then tab.preco_unit_aux else tab.valor_novo end) as preco_unit, (case when tab.valor_novo is null then tab.percentual_aux else tab.valor_novo end) as percentual, (case when tab.valor_novo is null then (case when tab.percentual_aux is not null then &apos;P&apos; else &apos;F&apos; end) else tab.tipo_novo_aux end) as tipo_novo, (case when (((case when tab.valor_novo is null then (case when tab.percentual_aux is not null then &apos;P&apos; else &apos;F&apos; end) else tab.tipo_novo_aux end) = &apos;P&apos;) or ((case when tab.valor_novo is null then (case when tab.percentual_aux is not null then &apos;P&apos; else &apos;F&apos; end) else tab.tipo_novo_aux end) = &apos;%&apos;)) then to_char((case when tab.valor_novo is null then tab.percentual_aux else tab.valor_novo end),&apos;999D99&apos;)||&apos; %&apos; else (case when (case when tab.produto is not null then (select tipo from produto where grid=tab.produto limit 1) end) = &apos;C&apos; then &apos;R$ &apos;||to_char((case when tab.valor_novo is null then tab.preco_unit_aux else tab.valor_novo end), &apos;999D999&apos;) else &apos;R$ &apos;||to_char((case when tab.valor_novo is null then tab.preco_unit_aux else tab.valor_novo end), &apos; 999D99&apos;) end) end) as valor from (select tpp.grid as tabela_preco_produto, tp.nome as tabela_nome, pp.produto, pp.grupo, pp.preco_unit as preco_unit_aux, pp.percentual as percentual_aux, (case when ((tpp.grid is not null) and (pp.valor is null) and (pp.percentual is null) and (pp.preco_unit is null)) then (select valor from tabela_preco_produto where grid = tpp.grid) else pp.valor end) as valor_novo, (case when ((tpp.grid is not null) and (pp.valor is null) and (pp.percentual is null) and (pp.preco_unit is null)) then (select tipo from tabela_preco_produto where grid = tpp.grid) else pp.tipo end) as tipo_novo_aux from tabela_preco tp join produto_preco pp on (tp.grid = pp.tabela) left join tabela_preco_produto tpp on (tpp.tabela_preco = tp.grid) where (case when $tabela_preco is null then true else tp.nome = $tabela_preco end) and $tabela_preco is not null and not tp.exclusiva UNION select tpp.grid as tabela_preco_produto, tp.nome as tabela_nome, pp.produto, pp.grupo, pp.preco_unit as preco_unit_aux, pp.percentual as percentual_aux, (case when ((tpp.grid is not null) and (pp.valor is null) and (pp.percentual is null) and (pp.preco_unit is null)) then (select valor from tabela_preco_produto where grid = tpp.grid) else pp.valor end) as valor_novo, (case when ((tpp.grid is not null) and (pp.valor is null) and (pp.percentual is null) and (pp.preco_unit is null)) then (select tipo from tabela_preco_produto where grid = tpp.grid) else pp.tipo end) as tipo_novo_aux from tabela_preco tp left join produto_preco pp on (tp.grid = pp.tabela) left join tabela_preco_produto tpp on (tpp.tabela_preco = tp.grid) where (not tp.exclusiva or tp.exclusiva is null) and $tabela_preco is null order by tabela_nome,grupo,produto ) as tab  " id="74192634cb39c9aa105de5298c573f56" ordem=" " titulo=""><apelidos>1  rel_posto_nome       tam=60
2  rel_data_hora        tam=18
3  tabela_nome          tam=40
4  item                 tam=37
5  tipo                 tam=7
6  valor                tam=13  alinha=direita
7  produto_preco_unit   tam=12	alinha=direita</apelidos><cab_pagina>
#1                                                    #2        
-------------------------------------------------------------------------
 
                       RELACAO DE TABELA DE PRECOS

</cab_pagina>
<cab_grupo nome="1" quebra="tabela_nome">
+-----------------------------------------------------------------------+
| NOME: #3                                                              |
+---------+------------------------------------------+------------------+
| Tipo    | Produto/Grupo                            | Valor/Porcentual |
+---------+------------------------------------------+------------------+
</cab_grupo>
<detalhe>
| #5      | #4                                       |    #6            |
</detalhe>
<rod_grupo nome="1">
+---------+------------------------------------------+------------------+

</rod_grupo>
<rod_pagina>
+---------+------------------------------------------+------------------+
</rod_pagina></layout></relatorio>