<?xml version='1.0' encoding='iso8859-1'?>
<relatorio ts="2008-10-16 09:03:43" versao_xml="0.1"><tela titulo="Contas a Receber por Forma de Pagamento">
  <quadro titulo="Parâmetros">
    <procura id="empresa" modelo="empresa" titulo="Empresa" valor_padrao="select empresa from empresa_local" />
    <procura id="cliente" modelo="pessoa" titulo="Cliente" />
    <campo id="data" modelo="periodo" titulo="Período" valor_padrao="select to_char(current_date, &apos;YYYY-mm-01&apos;)::date, to_char(current_date + interval &apos;1 month&apos;, &apos;YYYY-mm-01&apos;)::date - 1" />
  </quadro>
</tela><ajuda>&lt;big&gt;&lt;b&gt;Relatorio de Contas a Receber por Forma de Pagamento&lt;/b&gt;&lt;/big&gt;

Este relatório permite ver as Contas a Receber por Forma de Pagamento</ajuda><layout dados="select 
    mm.nome,
    sum(case when m.vencto &lt; current_date then m.valor else 0 end) as atraso,
    sum(case when m.vencto &lt; current_date then 0 else m.valor end) as receber
from 
    movto m 
       join motivo_movto mm on (m.motivo=mm.grid) 
where 
    m.child=0 
and     (case when $empresa is null then true else m.empresa = $empresa end)
and     (case when $cliente is null then true else m.pessoa = $cliente end)
and     m.conta_debitar like (select conta from conta_config where chave = &apos;VALORES A RECEBER&apos;)||&apos;%&apos; 
and     m.vencto between $data_ini and $data_fim
group by
    mm.nome
order by 
    mm.nome" id="b1df05a834bc38ee330fd7113bb63555" ordem=" " titulo="Resumido"><apelidos>1  rel_posto_nome	tam=40
2  rel_data_hora	tam=18
3  nome			tam=35 
4  atraso               tam=13	fmt=%.02f
5  receber              tam=14	fmt=%.02f
6  subtotal             tam=14	fmt=%.02f	expr=atraso+receber
7  total_atraso         tam=13	fmt=%.02f	func=soma	campo=atraso
8  total_receber        tam=14	fmt=%.02f	func=soma	campo=receber
9  total                tam=14	fmt=%.02f	func=soma	campo=subtotal</apelidos><cab_pagina>
#1                                                                       #2              
-----------------------------------------------------------------------------------------

                 CONTAS A RECEBER POR FORMA DE PAGAMENTO - RESUMIDO		 
				 
+-------------------------------------+---------------+----------------+----------------+
| Conta                               |     Em atraso |      A receber |       Subtotal |
+-------------------------------------+---------------+----------------+----------------+
</cab_pagina>

<detalhe>
| #3                                  | #4            | #5             | #6             |
</detalhe>

<rod_relat>
+-------------------------------------+---------------+----------------+----------------+
| Total                               | #7            | #8             | #9             |
+-------------------------------------+---------------+----------------+----------------+
</rod_relat>
</layout><layout dados="select 
    mm.nome,
    vencto,
    sum(case when m.vencto &lt; current_date then m.valor else 0 end) as atraso,
    sum(case when m.vencto &lt; current_date then 0 else m.valor end) as receber
from 
    movto m 
       join motivo_movto mm on (m.motivo=mm.grid) 
where 
    m.child=0 
and     (case when $empresa is null then true else m.empresa = $empresa end)
and     (case when $cliente is null then true else m.pessoa = $cliente end)
and     m.conta_debitar like (select conta from conta_config where chave = &apos;VALORES A RECEBER&apos;)||&apos;%&apos; 
and     m.vencto between $data_ini and $data_fim
group by
    mm.nome,
    vencto
order by 
    mm.nome,
    vencto" id="2893d73f6002dc97e766925aa08f45e3" ordem="" titulo="Dia a Dia"><apelidos>1  rel_posto_nome	tam=40
2  rel_data_hora	tam=18
3  nome			tam=60 
4  atraso               tam=14  fmt=%.02f
5  receber              tam=14  fmt=%.02f
6  subtotal_dia		tam=14  fmt=%.02f	expr=atraso+receber
7  subtotal_atraso   	tam=14  fmt=%.02f	func=soma	campo=atraso		grupo=1
8  subtotal_receber	tam=14  fmt=%.02f	func=soma	campo=receber		grupo=1
9  subtotal         	tam=14  fmt=%.02f	func=soma	campo=subtotal_dia	grupo=1
10 vencto		tam=10	fmt=data
11 total_atraso         tam=13  fmt=%.02f	func=soma	campo=atraso
12 total_receber        tam=14	fmt=%.02f	func=soma	campo=receber
13 total                tam=14  fmt=%.02f	func=soma	campo=subtotal_dia


</apelidos><cab_pagina>
#1                                                                       #2              
-----------------------------------------------------------------------------------------

                 CONTAS A RECEBER POR FORMA DE PAGAMENTO - DIA A DIA		 

</cab_pagina>
<cab_grupo nome="1" quebra="nome">
+---------------------------------------------------------------------------------------+
| CONTA: #3                                                                             |
+------------------------------------+----------------+----------------+----------------+
| Data                               |      Em atraso |      A receber |       Subtotal |
+------------------------------------+----------------+----------------+----------------+
</cab_grupo>

<detalhe>
| #10                                | #4             | #5             | #6             |
</detalhe>

<rod_grupo nome="1">
+------------------------------------+----------------+----------------+----------------+
| SubTotal                           | #7             | #8             | #9             |
+------------------------------------+----------------+----------------+----------------+

</rod_grupo>
<rod_pagina>
+------------------------------------+----------------+----------------+----------------+
</rod_pagina>
<rod_relat>
+------------------------------------+----------------+----------------+----------------+
| Total                              | #11            | #12            | #13            |
+------------------------------------+----------------+----------------+----------------+
</rod_relat>
</layout><layout dados="select 
    mm.nome,
    coalesce(p.nome,&apos;NÃO INFORMADO&apos;) as nome_cliente, 
    sum(case when m.vencto &lt; current_date then m.valor else 0 end) as atraso,
    sum(case when m.vencto &lt; current_date then 0 else m.valor end) as receber
from 
    movto m 
       join motivo_movto mm on (m.motivo=mm.grid) 
       left join pessoa p on (p.grid=m.pessoa) 
where 
    m.child=0 
and     (case when $empresa is null then true else m.empresa = $empresa end)
and     (case when $cliente is null then true else m.pessoa = $cliente end)
and     m.vencto between $data_ini and $data_fim
and     m.conta_debitar like (select conta from conta_config where chave = &apos;VALORES A RECEBER&apos;)||&apos;%&apos;
group by 
    mm.nome, 
    p.nome
order by 
    mm.nome, 
    p.nome" id="2fe0683e20549772b7a6a0e4765129f4" ordem="" titulo="Por Cliente"><apelidos>1  rel_posto_nome	tam=40
2  rel_data_hora	tam=18
3  nome			tam=60 
4  atraso               tam=14  fmt=%.02f
5  receber              tam=14  fmt=%.02f
6  subtotal_dia		tam=14  fmt=%.02f	expr=atraso+receber
7  subtotal_atraso   	tam=14  fmt=%.02f	func=soma	campo=atraso		grupo=1
8  subtotal_receber	tam=14  fmt=%.02f	func=soma	campo=receber		grupo=1
9  subtotal         	tam=14  fmt=%.02f	func=soma	campo=subtotal_dia	grupo=1
10 nome_cliente		tam=34
11 total_atraso         tam=13  fmt=%.02f	func=soma	campo=atraso
12 total_receber        tam=14	fmt=%.02f	func=soma	campo=receber
13 total                tam=14  fmt=%.02f	func=soma	campo=subtotal_dia


</apelidos><cab_pagina>
#1                                                                       #2              
-----------------------------------------------------------------------------------------

                 CONTAS A RECEBER POR FORMA DE PAGAMENTO - POR CLIENTE		 

</cab_pagina>
<cab_grupo nome="1" quebra="nome">
+---------------------------------------------------------------------------------------+
| CONTA: #3                                                                             |
+------------------------------------+----------------+----------------+----------------+
| Cliente                            |      Em atraso |      A receber |       Subtotal |
+------------------------------------+----------------+----------------+----------------+
</cab_grupo>

<detalhe>
| #10                                | #4             | #5             | #6             |
</detalhe>

<rod_grupo nome="1">
+------------------------------------+----------------+----------------+----------------+
| SubTotal                           | #7             | #8             | #9             |
+------------------------------------+----------------+----------------+----------------+

</rod_grupo>
<rod_pagina>
+------------------------------------+----------------+----------------+----------------+
</rod_pagina>
<rod_relat>
+------------------------------------+----------------+----------------+----------------+
| Total                              | #11            | #12            | #13            |
+------------------------------------+----------------+----------------+----------------+
</rod_relat>
</layout></relatorio>