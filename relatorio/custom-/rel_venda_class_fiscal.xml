<?xml version='1.0' encoding='iso8859-1'?>
<relatorio ts="2008-08-11 14:58:18" versao_xml="0.1"><tela titulo="Relatório de Vendas por Grupo">
  <quadro titulo="Parâmetros">
    <campo id="data_periodo" modelo="periodo" requerido="sim" tipo="data" titulo="Periodo" valor_padrao="select to_char(current_date, &apos;YYYY-mm-01&apos;)::date, (to_char(current_date + interval &apos;1 month&apos;, &apos;YYYY-mm-01&apos;)::date - 1) " />
    <procura id="grupo" modelo="grupo_produto" titulo="Grupo" valor_padrao="select null" />
    <procura id="subgrupo" modelo="subgrupo_produto" origem="select grid, codigo, nome from subgrupo" titulo="SubGrupo" />
    <procura id="cst" modelo="" origem="select codigo, descricao as nome from cst" titulo="CST" />
    <campo id="turno" tipo="inteiro" titulo="Turno" />
  </quadro>
  <quadro titulo="Opcoes">
    <check id="exibir_pis_cofins" titulo="Exibir apenas produtos com PIS e COFINS" valor_padrao="select 0" />
  </quadro>
</tela><ajuda>&lt;big&gt;&lt;b&gt;Relatorio de Vendas por Grupo&lt;/b&gt;&lt;/big&gt;

Este relatório permite ver as Vendas por Grupo</ajuda><layout dados="select c.codigo as class_codigo, c.descricao as class_nome, p.classificacao_fiscal, sum(l.quantidade) as quantidade, sum(l.valor) as valor, (case when c.descricao is null or c.codigo is null then &apos;SEM CLASSIFICAÇÃO FISCAL&apos; else c.codigo || &apos; - &apos; || c.descricao end) as class_cod_nome from lancto l left join produto p on (l.produto = p.grid) left join grupo_produto g on (p.grupo = g.grid) left join classificacao_fiscal c on (p.classificacao_fiscal = c.grid) where (l.data between $data_periodo_ini and $data_periodo_fim) and l.operacao = &apos;V&apos; and (case when $grupo is null then true else p.grupo = $grupo end) and (case when $subgrupo is null then true else p.subgrupo = $subgrupo end) and (case when $subgrupo is null then true else p.subgrupo = $cst end) group by c.codigo, c.descricao, p.classificacao_fiscal order by c.codigo, c.descricao, p.classificacao_fiscal " id="4926af86b780ec1532e27002f617f068" ordem=" " titulo="Sintético"><apelidos>1  rel_posto_nome      tam=60
2  rel_data_hora       tam=18  
3  titulo              tam=96  alinha=centro
7  class_cod_nome      tam=40
8  valor               tam=12  fmt=%.02f
9  total               tam=12  fmt=%.02f	func=soma	campo=valor</apelidos><cab_pagina>
#1                                                                              #2                 
------------------------------------------------------------------------------------------------
   
                       RELATORIO DE VENDAS POR CLASSIFICACAO FISCAL - SINTETICO
#3

+--------------------------------------------------------+--------------+
| Classificacao Fiscal                                   |       Valor  |
+--------------------------------------------------------+--------------+
</cab_pagina>
<detalhe>
| #7                                                       #8           |
</detalhe>
<rod_relat>
|                                                                       |
| TOTAL GERAL                                              #9           |
+-----------------------------------------------------------------------+
</rod_relat>
<rod_pagina>
+-----------------------------------------------------------------------+
</rod_pagina></layout><layout dados="select l.data, c.codigo as class_codigo, c.descricao as class_nome, p.classificacao_fiscal, sum(l.quantidade) as quantidade, sum(l.valor) as valor, (case when c.descricao is null or c.codigo is null then &apos;SEM CLASSIFICAÇÃO FISCAL&apos; else c.codigo || &apos; - &apos; || c.descricao end) as class_cod_nome from lancto l left join produto p on (l.produto = p.grid) left join grupo_produto g on (p.grupo = g.grid) left join classificacao_fiscal c on (p.classificacao_fiscal = c.grid) where (l.data between $data_periodo_ini and $data_periodo_fim) and l.operacao = &apos;V&apos; and (case when $grupo is null then true else p.grupo = $grupo end) and (case when $subgrupo is null then true else p.subgrupo = $subgrupo end) and (case when $subgrupo is null then true else p.subgrupo = $cst end) group by l.data, c.codigo, c.descricao, p.classificacao_fiscal order by l.data, c.codigo, c.descricao, p.classificacao_fiscal" id="e3a97f222529073c38d58863f102974f" ordem=" " titulo="Sintético agrupado por data"><apelidos>1  rel_posto_nome      tam=60
2  rel_data_hora       tam=18  
3  titulo              tam=96  alinha=centro
4  data                tam=15  fmt=data
7  class_cod_nome      tam=40
8  valor               tam=12  fmt=%.02f
9  sub_data            tam=12  fmt=%.02f	func=soma	campo=valor	grupo=1
10 total               tam=12  fmt=%.02f	func=soma	campo=valor</apelidos><cab_pagina>
#1                                                                              #2                 
------------------------------------------------------------------------------------------------
   
                   RELATORIO DE VENDAS POR CLASSIFICACAO FISCAL - SINTETICO POR DATA
#3

+--------------------------------------------------------+--------------+
| Classificacao Fiscal                                   |       Valor  |
+--------------------------------------------------------+--------------+
</cab_pagina>
<cab_grupo nome="1" quebra="data">
| DATA: #4                                                              |
|                                                                       |
</cab_grupo>
<detalhe>
| #7                                                       #8           |
</detalhe>
<rod_grupo nome="1">
|                                                          ------------ |
| SUBTOTAL #4                                              #9           |
|                                                                       |
</rod_grupo>
<rod_relat>
| TOTAL GERAL                                              #10          |
+-----------------------------------------------------------------------+
</rod_relat>
<rod_pagina>
+-----------------------------------------------------------------------+
</rod_pagina>
</layout><layout dados="select c.codigo as class_codigo, c.descricao as class_nome, p.codigo as produto_codigo, p.nome as produto_nome, p.unid_med, p.classificacao_fiscal, sum(l.quantidade) as quantidade, sum(l.valor) as valor, p.pis, p.cofins, p.tributacao, (case when c.descricao is null or c.codigo is null then &apos; &apos; else c.codigo || &apos; - &apos; || c.descricao end) as class_cod_nome from lancto l left join produto p on (l.produto = p.grid) left join grupo_produto g on (p.grupo = g.grid) left join classificacao_fiscal c on (p.classificacao_fiscal = c.grid) where (l.data between $data_periodo_ini and $data_periodo_fim) and l.operacao = &apos;V&apos; and (case when $grupo is null then true else p.grupo = $grupo end) and (case when $subgrupo is null then true else p.subgrupo = $subgrupo end) and (case when $subgrupo is null then true else p.subgrupo = $subgrupo end) and (case when $exibir_pis_cofins = 1 then (p.pis and p.cofins) else true end) group by c.codigo, c.descricao, p.classificacao_fiscal, p.nome, p.codigo, p.unid_med, l.produto, p.pis, p.cofins, p.tributacao order by c.codigo, c.descricao, p.classificacao_fiscal, p.nome, p.codigo, p.unid_med, l.produto, p.pis, p.cofins, p.tributacao" id="421ec70582cdd3b05a17ac28d18146b7" ordem=" " titulo="Analítico"><apelidos>1  rel_posto_nome      tam=60
2  rel_data_hora       tam=18  
3  titulo              tam=96  alinha=centro
4  class_cod_nome      tam=60
7  produto_codigo      tam=6   
8  produto_nome        tam=40
9  unid_med            tam=4
10 quantidade          tam=10  fmt=%.01f
11 valor               tam=10  fmt=%.02f
12 sub_class_qtde      tam=10  fmt=%.01f	func=soma	campo=quantidade	grupo=1
13 sub_class_valor     tam=10  fmt=%.02f	func=soma	campo=valor		grupo=1
14 total_qtde          tam=10  fmt=%.01f	func=soma	campo=quantidade
15 total_valor         tam=10  fmt=%.02f	func=soma	campo=valor</apelidos><cab_pagina>
#1                                                                              #2                 
------------------------------------------------------------------------------------------------
   
                       RELATORIO DE VENDAS POR CLASSIFICACAO FISCAL - ANALITICO
#3

+--------+-----------------------------------------------+---------+------------+--------------+
| Codigo | Descricao                                     | Unidade | Quantidade |       Valor  |
+--------+-----------------------------------------------+---------+------------+--------------+
</cab_pagina>

<cab_grupo nome="1" quebra="classificacao_fiscal">
| CLASSIFICACAO FISCAL: #4                                                                     |
|                                                                                              |
</cab_grupo>
<detalhe>
| #7       #8                                                #9      #10           #11         |
</detalhe>
<rod_grupo nome="1">
|                                                                   -----------   ------------ |
| SUBTOTAL #4                                                        #12           #13         |
|                                                                                              |
</rod_grupo>
<rod_relat>
| TOTAL GERAL                                                        #14           #15         |
+----------------------------------------------------------------------------------------------+
</rod_relat>
<rod_pagina>
+----------------------------------------------------------------------------------------------+
</rod_pagina></layout><layout dados="select l.data, c.codigo as class_codigo, c.descricao as class_nome, p.codigo as produto_codigo, p.nome as produto_nome, p.unid_med, p.classificacao_fiscal, sum(l.quantidade) as quantidade, sum(l.valor) as valor, p.pis, p.cofins, p.tributacao, (case when c.descricao is null or c.codigo is null then &apos; &apos; else c.codigo || &apos; - &apos; || c.descricao end) as class_cod_nome from lancto l left join produto p on (l.produto = p.grid) left join grupo_produto g on (p.grupo = g.grid) left join classificacao_fiscal c on (p.classificacao_fiscal = c.grid) where (l.data between $data_periodo_ini and $data_periodo_fim) and l.operacao = &apos;V&apos; and (case when $grupo is null then true else p.grupo = $grupo end) and (case when $subgrupo is null then true else p.subgrupo = $subgrupo end) and (case when $subgrupo is null then true else p.subgrupo = $subgrupo end) and (case when $exibir_pis_cofins = 1 then (p.pis and p.cofins) else true end) group by l.data, c.codigo, c.descricao, p.classificacao_fiscal, p.nome, p.codigo, p.unid_med, l.produto, p.pis, p.cofins, p.tributacao order by l.data, c.codigo, c.descricao, p.classificacao_fiscal, p.nome, p.codigo, p.unid_med, l.produto, p.pis, p.cofins, p.tributacao" id="c5103e2603747ab9b93138ca80dab369" ordem=" " titulo="Analítico agrupado por data"><apelidos>1  rel_posto_nome      tam=60
2  rel_data_hora       tam=18  
3  titulo              tam=96  alinha=centro
4  data                tam=60  fmt=data
5  class_cod_nome      tam=60
7  produto_codigo      tam=6
8  produto_nome        tam=40
9  unid_med            tam=4
10 quantidade          tam=10  fmt=%.01f
11 valor               tam=10  fmt=%.02f
12 sub_class_qtde      tam=10  fmt=%.01f	func=soma	campo=quantidade	grupo=2
13 sub_class_valor     tam=10  fmt=%.02f	func=soma	campo=valor		grupo=2
14 sub_data_qtde       tam=10  fmt=%.01f	func=soma	campo=quantidade	grupo=1
15 sub_data_valor      tam=10  fmt=%.02f	func=soma	campo=valor		grupo=1
16 total_qtde          tam=10  fmt=%.01f	func=soma	campo=quantidade
17 total_valor         tam=10  fmt=%.02f	func=soma	campo=valor</apelidos><cab_pagina>
#1                                                                              #2                 
------------------------------------------------------------------------------------------------
   
                 RELATORIO DE VENDAS POR CLASSIFICACAO FISCAL - ANALITICO POR DATA
#3

+--------+-----------------------------------------------+---------+------------+--------------+
| Codigo | Descricao                                     | Unidade | Quantidade |       Valor  |
+--------+-----------------------------------------------+---------+------------+--------------+
</cab_pagina>

<cab_grupo nome="1" quebra="data">
| DATA: #4                                                                                     |
|                                                                                              |
</cab_grupo>
<cab_grupo nome="2" quebra="data,classificacao_fiscal">
| CLASSIFICACAO FISCAL: #5                                                                     |
|                                                                                              |
</cab_grupo>
<detalhe>
| #7       #8                                                #9      #10           #11         |
</detalhe>
<rod_grupo nome="2">
|                                                                   -----------   ------------ |
| SUBTOTAL #5                                                        #12           #13         |
|                                                                                              |
</rod_grupo>
<rod_grupo nome="1">
| SUBTOTAL #4                                                        #14           #15         |
+----------------------------------------------------------------------------------------------+
|                                                                                              |
</rod_grupo>
<rod_relat>
| TOTAL GERAL                                                        #16           #17         |
+----------------------------------------------------------------------------------------------+
</rod_relat>
<rod_pagina>
+----------------------------------------------------------------------------------------------+
</rod_pagina></layout></relatorio>